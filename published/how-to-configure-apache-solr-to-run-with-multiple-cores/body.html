<p>In this tutorial, I will guide you through the process of configuring your Apache Solr to run with multiple cores. This can be useful if you are using Apache Solr with multiple different projects, and need complete separation between the two projects&#39; search indexes.</p><p>This tutorial assumes that you are running Apache Solr on Jetty Web Server, and have both set up in the same manner as described in the following tutorials:</p><p><a href="/article/19">How to Install Jetty Web Server in Ubuntu</a></p><p><a href="/article/22">How to Install Apache Solr in Ubuntu</a></p><h3>Edit solr.xml</h3><pre class="code" data-type="code">cd /opt/jetty/solr
sudo gedit solr.xml</pre><p>If you haven&#39;t done any modifications to your current solr.xml file, then use the following as a template:</p><pre class="code" data-type="xml"><br>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;<br>&lt;!--<br> All (relative) paths are relative to the installation path<br>  <br>  persistent: Save changes made via the API to this file<br>  sharedLib: path to a lib directory that will be shared across all cores<br>--&gt;<br>&lt;solr persistent=&quot;false&quot;&gt;<br><br>  &lt;!--<br>  adminPath: RequestHandler path to manage cores.  <br>    If &#039;null&#039; (or absent), cores will not be manageable via request handler<br>  --&gt;<br>  &lt;cores adminPath=&quot;/admin/cores&quot;&gt;<br>    &lt;core name=&quot;core0&quot; instanceDir=&quot;./cores/core0&quot; /&gt;<br>    &lt;core name=&quot;core1&quot; instanceDir=&quot;./cores/core1&quot; /&gt;<br>  &lt;/cores&gt;<br>&lt;/solr&gt;<br></pre><p><i>The import parts of this file are the <strong>core</strong> tags.</i></p><br><h3>Create Cores Directory</h3><p>Create a new directory within the solr directory to keep all the cores organized:</p><pre class="code" data-type="code">cd /opt/jetty/solr<br>sudo mkdir cores</pre><br><h3>Configure First Core</h3><p>We&#39;re going to use the default core that ships with Apache Solr 4 as our template:</p><pre class="code" data-type="code">cd /opt/jetty/solr<br>sudo cp -R collection1 ./cores/core0</pre><p>Create a data directory for this core:</p><pre class="code" data-type="code">cd /opt/jetty/solr/cores/core0<br>sudo mkdir data</pre><p>Now edit the solrconfig.xml for this core:</p><pre class="code" data-type="code">cd /opt/jetty/solr/cores/core0/conf<br>sudo vim solrconfig.xml</pre><p>Change the following:</p><pre class="code" data-type="code">&lt;dataDir&gt;${solr.data.dir:}&lt;/dataDir&gt;</pre><p>To:</p><pre class="code" data-type="code">&lt;dataDir&gt;/opt/jetty/solr/cores/core0/data&lt;/dataDir&gt;</pre><p>And, change the following:</p><pre class="code" data-type="code">&lt;str name=&quot;dir&quot;&gt;${solr.data.dir:}&lt;/str&gt;</pre><p>To:</p><pre class="code" data-type="code">&lt;str name=&quot;dir&quot;&gt;/opt/jetty/solr/cores/core0/data&lt;/str&gt;</pre><br><h3>Create Second Core</h3><p>Copy the first core:</p><pre class="code" data-type="code">cd /opt/jetty/solr/cores<br>sudo cp -R core0 core1</pre><p>Now edit the solrconfig.xml for this core:</p><pre class="code" data-type="code">cd /opt/jetty/solr/cores/core1/conf<br>sudo vim solrconfig.xml</pre><p>Change the following:</p><pre class="code" data-type="code">&lt;dataDir&gt;${solr.data.dir:}&lt;/dataDir&gt;</pre><p>To:</p><pre class="code" data-type="code">&lt;dataDir&gt;/opt/jetty/solr/cores/core1/data&lt;/dataDir&gt;</pre><p>And, change the following:</p><pre class="code" data-type="code">&lt;str name=&quot;dir&quot;&gt;${solr.data.dir:}&lt;/str&gt;</pre><p>To:</p><pre class="code" data-type="code">&lt;str name=&quot;dir&quot;&gt;/opt/jetty/solr/cores/core1/data&lt;/str&gt;</pre><br><h3>Set Owner of Cores Directory</h3><p>Finally, you&#39;ll need to set Jetty as the owner of the cores directory:</p><pre class="code" data-type="code">cd /opt/jetty/solr<br>sudo chown -R jetty:jetty cores</pre><br><h3>Restart Jetty</h3><pre class="code" data-type="code">sudo /etc/init.d/jetty restart</pre><br><p>If all is well, you should be able to access the admin page for each core at the following URLs:</p><p><a href="http://localhost:8080/solr/#/~cores/core0">core0 -- admin</a></p><p><a href="http://localhost:8080/solr/#/~cores/core1">core1 -- admin</a></p><br><p>The query URL works similarly:</p><p><a href="http://localhost:8080/solr/core0/select?q=*:*">core0 -- query URL</a></p><p><a href="http://localhost:8080/solr/core1/select?q=*:*">core1 -- query URL</a></p>