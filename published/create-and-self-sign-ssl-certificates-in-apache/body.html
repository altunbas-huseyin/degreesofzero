<preview>
	<p>In this tutorial I will guide you through the process of creating and self-signing a SSL certificate, installing that certificate in Apache, and configuring Apache for SSL.</p>
</preview>
<p>This tutorial assumes that you have already <a href="https://help.ubuntu.com/community/ApacheMySQLPHP">installed Apache</a>.</p>
<h3>Install OpenSSL</h3><p>This is required to create SSL Certificates:</p><pre class="code">sudo apt-get install openssl</pre><br><h3>Create SSL Certificate</h3><p>Generate a server key:</p><pre class="code">cd /etc/apache2<br>sudo mkdir ssl<br>cd ssl<br>sudo openssl genrsa -des3 -out server.key 4096</pre><p>You will be prompted for a pass phrase. This can be whatever you want. You will need to enter this pass phrase when doing things with this SSL Certificate later.</p><p>Create a version of the server key that does not require a password:</p><pre class="code">sudo openssl rsa -in server.key -out server.key.insecure<br>sudo mv server.key server.key.secure<br>sudo mv server.key.insecure server.key</pre><p>Protect these files by setting the owner to root and setting the strictest possible file permissions:</p><pre class="code">cd /etc/apache2/ssl<br>sudo chown root:root *<br>sudo chmod 000 *</pre><br><h3>Self-Sign SSL Certificate</h3><p>Create a Certificate Signing Request for your server key:</p><pre class="code">openssl req -new -key server.key -out server.csr</pre><p>You will be prompted to enter a series of information such as Country Name, State or Province Name, etc. Since you&#39;re Self-Signing this SSL Certificate and using it for your local development environment, or a remote testing environment, this can be whatever you want.</p><p>Now sign the Certificate Signing Request:</p><pre class="code">openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</pre><br><h3>Configure Apache for SSL</h3><p>Enable <i>mod_ssl</i> in Apache:</p><pre class="code">cd /etc/apache2/mods-enabled<br>sudo ln -s ../mods-available/ssl.load ssl.load<br>sudo ln -s ../mods-available/ssl.conf ssl.conf</pre><p>Edit Apache&#39;s default SSL configuration file:</p><pre class="code">cd /etc/apache2/sites-available<br>sudo vim default-ssl</pre><p>Change the following line:</p><pre class="code">SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem</pre><p>To:</p><pre class="code">SSLCertificateFile /etc/apache2/ssl/server.crt</pre><br><p>And this line:</p><pre class="code">SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key</pre><p>To:</p><pre class="code">SSLCertificateKeyFile /etc/apache2/ssl/server.key</pre><br><h4>Using the Password-Protected Server Key</h4><p>If you want to use the password-protected server key instead, change the last line you modified of the default SSL configuration file to the following:</p><pre class="code">SSLCertificateKeyFile /etc/apache2/ssl/server.key.secure</pre><p>It&#39;s worth noting that if you use the password-protected server key, every time you restart/start Apache you will be prompted to enter its Pass Phrase.</p><br><p>Add symlink to SSL Configuration file in your <i>sites-enabled</i> directory:</p><pre class="code">cd /etc/apache2/sites-enabled<br>sudo ln -s ../sites-available/default-ssl 000-default-ssl</pre><br><p>Restart Apache:</p><pre class="code">sudo /etc/init.d/apache2 restart</pre><br><h3>Testing / Debugging</h3><p>If things are working, you should be able to access the sites hosted on your server with secure HTTP. If you are on your local machine, try the following:</p><p><a href="https://localhost">https://localhost</a></p><p>If you are using Chrome, you should be presented with a screen that says, "The site&#39;s security certificate is not trusted!" Just hit the "Process anyway" button and you&#39;ll be able to access your site with the new Self-Signed SSL Certificate. If you are getting the "SSL connection error" page, that means something is not configured properly. Here are some possible issues that could be preventing your SSL configuration from working properly:</p><h4>The SSL Configuration file is not being included</h4><p>How you go about checking this will vary, depending upon your Apache installation. Check Apache&#39;s primary configuration file, and make sure the default SSL configuration file is being included.</p><h4>Something besides Apache could be listening to port 443</h4><p>If you are working on your personal computer, the culprit is probably a messaging client such as Skype. Otherwise, it might be another web server installed on the machine. To find out quickly whether or not port 443 is being listened to by something besides Apache, you must first stop Apache:</p><pre class="code">sudo /etc/init.d/apache2 stop</pre><p>Then use the following command to view what&#39;s going on with the computer&#39;s ports:</p><pre class="code">netstat -antp</pre>